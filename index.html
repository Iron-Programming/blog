<!DOCTYPE html>
<!-- 
******** Team Floran Homepage ********
Lets go have some fun coding everyone! :)

Designed and styled by Iron Programming. 

I didn't have very much time to code this, so it was a bit rushed. :p

Have any questions? I'd love to answer any questions you have!

tested on
 - chrome, firefox, edge
-->
<html>
    <head>
        <!-- Pangolin Font -->
        <link href="https://fonts.googleapis.com/css2?family=Blinker&family=Pangolin&family=Piedra&display=swap" rel="stylesheet">
        <meta charset="utf-8">
        <!-- Title of our webpage -->
        <title>Floran's team homepage. </title>
        <!-- Styling the outline of our webpage -->
        <style>
            body {
                background-image: linear-gradient(rgb(124, 108, 245),rgb(120, 251, 255), rgb(126, 159, 252));
                width: 600px;
                min-height: 582.5px;
                margin-left: -5px;
                margin-right: -5px;
                padding: 0px;
                overflow: hidden auto;
            }
            .page-header {
                text-align: center;
                border-style: solid none;
                border-color: rgb(126, 220, 232);
                margin-left: 10px;
                margin-top: 75px;
                font-size: 35px;
            }
            
            /* Styling the part of the webpage that's always visible */
            .btn-group {
                position: fixed;
                left: 0px;
                top: 0px;
                width: 200px;
            }
            .btn-group .button {
                background-color: rgb(55, 207, 212); 
                font-size: 16px;
                border: 1px solid rgb(26, 126, 173); 
                height: 55px;
                color: white; 
                padding: 10px 24px;
                cursor: pointer; 
                float: left; 
                outline: none;
            }
            .btn-group .button:not(:last-child) {
                border-right: none; 
            }
            /* Clear floats (clearfix hack) */
            .btn-group:after {
                content: "";
                clear: both;
                display: table;
            }
            .btn-group .button:hover {
                background-color: rgba(70, 197, 219);
            }
            
            .word-button {
                color: rgb(0, 0, 250);
            }
            /* Checks if the mouse is hovering over a word-button */
            .word-button:hover {
                color: rgb(22, 115, 222);
                cursor: pointer;
            }
            
            #popup {
                position: absolute;
                background-color: rgb(199, 173, 199);
                padding: 3px;
                border: black double 1px;
                z-index: auto;
                left: 20px;
                top: 20px;
                display: none;
            }
            h3, h1, h2, h4, h5, h6 {
                font-family: 'Pangolin', cursive;
            }
            p, text {
                font-family: 'Piedra', cursive;
            }
            
            #clouds {
                position: fixed;
                bottom: var(--bPos);
                left: var(--lPos);
            }
        </style>
        
        <!-- Styling the menu -->
        <style>
            .section {
                background-color: rgba(0, 0, 200, 0.1);
                border: double blue 5px;
                margin-left: 10px;
                padding: 5px;
                min-height: 200px;
                margin-bottom: 50px;
            }
            .section h3 {
                font-size: 40px;
                color: black;
                margin-top: 10px;
                margin-bottom: 5px;
                
            }
            .section img {
                float: left;
                margin-right: 25px;
            }
            
            .section p {
                font-size: 20px;
                margin: 0px;
            }
        </style>
        
        <!-- Styling the stats page -->
        <style>
            #teams {
                background-color: rgb(0, 0, 0, 0.1);
                margin-left: 50px;
                margin-top: 10px;
                width: 500px;
                margin-bottom: 45px;
            }
            #teams thead {
                text-align: left;
                width: 25%;
            }
            
            .trophy {
                
            }
        </style>
        
        <!-- Styling the members page -->
        <style>
            .memberSlot {
                background-color: rgb(255, 255, 255, 0.8);
                margin-left: 50px;
                margin-top: 10px;
                width: 500px;
                height: 100px;
                margin-bottom: 45px;
            }
            
            .member-img {
                float: left;
                margin-right: 20px;
                margin-left: 10px;
                border-bottom: 2px solid currentColor;
            }
            
            .member-name {
                margin-bottom: 12.5px;
                font-size: 4ex;
            }
            
            .member-points {
                float: left;
                margin-top: 20px;
            }
            .member-level {
                float: right;
                margin-right: 10px;
            }
            .bio {
                height: 35px;
                width: 225px;
                float: left;
                margin-top: -10px;
                margin-left: 10px;
                font-size: 10px;
                overflow: hidden;
                background-color: rgba(100, 100, 100, 0.2);
                padding: 5px;
                border-radius: 5px;
            }
            .userImgLvl {
                float: right;
                width: 55px;
                margin-right: 10px;
                margin-top: -40px;
                margin-bottom: -10px;
            }
            
            #searchMembers {
                margin-left: 375px;
            }
        </style>
        
        <!-- Styling the news page -->
        <style>
            .news-section {
                background-color: rgba(0, 0, 200, 0.1);
                border: double blue 5px;
                margin-left: 10px;
                padding: 20px;
                min-height: 100px;
                margin-bottom: 50px;
            }
            
            .news-section h3 {
                font-size: 40px;
                color: black;
                margin-top: 0px;
                margin-bottom: 15px;
            }
            
            .news-section p {
                font-size: 20px;
                margin: 0px;
            }
            
            #link {
                fill: rgb(153, 28, 153);
            }
            #link:hover {
                fill: rgb(235, 23, 235);
            }
        </style>
    </head>
    <body>
        <!-- Header; this is always visible -->
        <div class="btn-group" style="width:100%">
                <!--Home button-->
                <button id="home-button" class="button" style="width:25%" onClick="clicked('home')" onmouseover="hovered('home')">Home</button>
                <!--Groups button-->
                <button id="member-button" class="button" style="width:25%" onClick="clicked('members')" onmouseover="hovered('members')">Members</button>
                <!--Status button-->
                <button id="stats-button" class="button" style="width:25%" onClick="clicked('stats')" onmouseover="hovered('stats')">Stats</button>
                <!--News button-->
                <button id="news-button" class="button" style="width:25%" onClick="clicked('news')" onmouseover="hovered('news')">News</button>
            </div>
    
        <!-- Menu Page -->
        <div class="page" id="home">
            <h1 class="page-header">Team Floran's Homepage</h1>
            
            <!-- Section 1 - About -->
            <div class="section">
                <img src="https://www.khanacademy.org/computer-programming/avatar-wip/4551974349520896/latest.png" id="floran-pic">
                <h3>About</h3>
                <p>Floran is an avatar created by <a target="_blank" href="https://www.khanacademy.org/computer-programming/avatar-wip/4551974349520896">Rachel</a> and is a team in the <a target="_blank" href="https://www.khanacademy.org/computer-programming/the-coding-olympics-joining-open/5971550287773696">Coding Olympics</a> contest.<br>As a part of Floran, we strive to code our best and have a fun time competiting. <br><br>Floran FTW!</p>
            </div>
            
            <!-- Section 2 - Members -->
            <div class="section">
                <img src="https://www.khanacademy.org/computer-programming/spin-off-of/5363417907544064/latest.png" id="floran-pic">
                <h3>Members</h3>
                <p>Team Floran consists of many members, some beginners, some experts.<br>We help each other out by giving advice and coding tips.<br><br>Click <span class="word-button"  onClick="clicked('members')">here</span> to see our amazing members.</p>
            </div>
            
            <!-- Section 3 - Follow Us -->
            <div class="section">
                <img src="https://www.khanacademy.org/computer-programming/spin-off-of/5363417907544064/latest.png" id="floran-pic">
                <h3>Follow Us</h3>
                <p>Interested in following us? <br>Subscribe to the NEWS THREAD in the Tips & Thanks to be notified when we release news.<br><br>Click <span class="word-button" onClick="clicked('news')">here</span> to the latest news.</p>
            </div>
        </div>
        
        <!-- Members Page -->
        <div class="page" id="members">
            <h1 class="page-header">Members</h1>
            <!--<input id="searchMembers" type="text" placeholder="Search members by username.">-->
        </div>
        
        <!-- Stats Page -->
        <div class="page" id="stats">
            <h1 class="page-header">Statistics</h1>
            <table id="teams">
                <thead> 
                    <tr>
                        <th>Avatar</th>
                        <th>Name</th>
                        <th>Members</th>
                        <th>Points</th>
                    </tr>
                </thead> 
                
                <tbody id="table-stats">
                </tbody>
            </table>
        </div>
        
        <!-- News Page -->
        <div class="page" id="news">
            <h1 class="page-header">News & Updates</h1>
        </div>
        
        <!-- Clouds at the bottom-->
        <svg id="clouds" height="140" width="600">
          <ellipse cx="100" cy="110" rx="100" ry="50"
          style="fill:rgb(255, 255, 255);" />
          <ellipse cx="200" cy="110" rx="100" ry="50"
          style="fill:rgb(255, 255, 255);" />
          <ellipse cx="300" cy="110" rx="100" ry="50"
          style="fill:rgb(255, 255, 255);" />
          <ellipse cx="400" cy="110" rx="100" ry="50"
          style="fill:rgb(255, 255, 255);" />
          <ellipse cx="500" cy="110" rx="100" ry="50"
          style="fill:rgb(255, 255, 255);" />
          <text x="225" y="100">Made by <a id="link" target="_blank" href="https://www.khanacademy.org/profile/ncochran2/projects">Iron Programming</a></text>
        </svg>
        
        <p id="popup">Text</p>
        
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        
        <!-- Updating the news thread -->
        <script>
        
        $.getJSON("https://www.khanacademy.org/api/internal/discussions/kaencrypted_4354cc19c79d0eedfd5c97bae1607ded_160a0a619af0d28613614840265845664963928280f0364d916fb4dcecd6f5c5a42b0a0172c45875665d9d32d2d3e5fa060fc53c3cbef9937f4c41975c32cbbc197b8295f7bdd23ced08c1c10f9ca7c3e4e26a89068d5d7617bb6e7f410a0c61a1210223037db800b20da1bdc6da6dad8be93447ea9ddc9395e2ce9df977a4a5aeb921b88dbc43026c3fddc8284004426e333d136abbe4a54eeb411bc54ca35f44152e8ac31186dc21f0533a2e4dcf471441596fa0d8e32e62eb63dceefb2233/replies?callback=?", function(data) {
            function addNews(cNews) {
                var str = data[cNews].content;
                if (str.length <= 3) {
                    return; 
                }
                
                str = str.replace(/_([\s\S]*?)_/g, '<p>$1</p>');
                str = str.replace(/\*([\s\S]*?)\*/g, '<h3>$1</h3>');
                $("<div class='news-section'>" + str + "</div>").appendTo("#news");
            }
                
                var index = 0;
                function loop() {
                  setTimeout(function() {
                    addNews(index);
                    index++;
                    if (index < members.length) {
                      loop();
                    } else {
                        $("#loading").hide();
                    }
                  }, 10);
                };
            
                loop();
            });
        </script>
        
        <!-- Adding members to the member-table -->
        <script>
            var teamImgs = [
                "https://www.khanacademy.org/cs/floran-seed/6223745951285248/latest.png",
                "https://www.khanacademy.org/cs/floran-seedling/5616064551010304/latest.png",
                "https://www.khanacademy.org/cs/floran-sapling/4992342118973440/latest.png",
                "https://www.khanacademy.org/cs/floran-tree/4820815520022528/latest.png",
                "https://www.khanacademy.org/cs/floran-ultimate/4864567244570624/latest.png"
            ];
        
            var members = [
                /**
                * To add another member to the table, do like so; 
                {
                    kaid: "users kaid",
                    points: THIER POINTS,
                    level: THEIR LEVEL
                }
                
                * To find their kaid value, simply find where they said something to you, and click on their avatar. This brings you to their profile. In the search bar, look at the link. Copy and paste the "kaid_...." part - that is their kaid.
                **/
                {
                    name: "ColdCutz",
                    level: 2,
                    kaid: "kaid_160334372890688962265542",
                    points: 0
                },
                {
                    name: "hazelhades",
                    level: 1,
                    kaid: "kaid_954404018456397123583891",
                    points: 0
                },
                {
                    name: "purplebanane12",
                    level: 1,
                    kaid: "kaid_484978767174156351727368",
                    points: 0
                },
                {
                    name: "༺ℛ𝒶𝒸𝒽ℯ𝓁༻",
                    level: 1,
                    kaid: "kaid_608027410171689568743910",
                    points: 0
                },
                {
                    name: "𝕊𝕡𝕒𝕣𝕜𝕝𝕖 𝕎𝕠𝕝𝕗",
                    level: 1,
                    kaid: "kaid_490733484445561441832728",
                    points: 0
                },
                {
                    name: "Slapshot Studios",
                    level: 1,
                    kaid: "kaid_1075322271131312408513109",
                    points: 0
                },
                {
                    name: "A's Graphics",
                    level: 1,
                    kaid: "kaid_1171783305990038781195198",
                    points: 0
                },
                {
                    name: "mewyowlfluff",
                    level: 2,
                    kaid: "kaid_855069384170747422876591",
                    points: 0
                },
                {
                    name: "𝙒𝙖𝙡𝙠𝙒𝙤𝙧𝙩𝙝𝙮",
                    level: 3,
                    kaid: "kaid_572162445297461577426497",
                    points: 0
                },
                {
                    name: "mr.nobody12345",
                    level: 2,
                    kaid: "kaid_587373380236883702537644",
                    points: 0
                },
                {
                    name: "𝙕𝙚 𝙍𝙚𝙙 𝘽𝙖𝙧𝙧𝙤𝙣",
                    level: 2,
                    kaid: "kaid_313232624660631773604189",
                    points: 0
                },
                {
                    name: "AquaDrop", //used to be Light Fury?
                    level: 2,
                    kaid: "kaid_253675883994860334543684",
                    points: 0
                },
                {
                    name: "SamWise",
                    level: 0,
                    kaid: "kaid_659800661397715681487277",
                    points: 0
                },
                {
                    name: "Epk",
                    level: 1,
                    kaid: "kaid_137542930216093176085379",
                    points: 0
                },
                {
                    name: "General Skywalker",
                    level: 2,
                    kaid: "kaid_1122447001100563348282321",
                    points: 0
                },
                {
                    name: "Iron Programming",
                    level: 4,
                    kaid: "kaid_1167371439589851086940548",
                    points: 0
                },
                {
                    name: "Faith G",
                    level: 2,
                    kaid: "kaid_1088601017819310502988695",
                    points: 0
                },
                {
                    name: "✿𝚝𝚎𝚊𝚌𝚞𝚙✿",
                    level: 1,
                    kaid: "kaid_923404609803055230971787",
                    points: 0
                },
                {
                    name: "Bʅαɳƙ",
                    level: 1,
                    kaid: "kaid_1194905981492360237012679",
                    points: 0
                },
                {
                    name: "SupeƦNθva",
                    level: 3,
                    kaid: "kaid_107451569190120182456300",
                    points: 0
                },
                {
                    name: "Skyla Anderson",
                    level: 3,
                    kaid: "kaid_152851887773401299736736",
                    points: 0
                },
                {
                    name: "DaProOfNoobs",
                    level: 2,
                    kaid: "kaid_50708538864371849001721",
                    points: 0
                },
                {
                    name: "I♡Programing",
                    level: 2,
                    kaid: "kaid_1013294387218239743836339",
                    points: 0
                },
                {
                    name: "John Indelicato",
                    level: 2,
                    kaid: "kaid_82199233550851723674329",
                    points: 0
                },
                {
                    name: "InnerFlame",
                    level: 1,
                    kaid: "kaid_888195786717097566221523",
                    points: 0
                },
                {
                    name: "Madison!",
                    level: 2,
                    kaid: "kaid_1011886976246786739984238",
                    points: 0
                },
                {
                    name: "Gray Wolf",
                    level: 4,
                    kaid: "kaid_639291037700385781852565",
                    points: 0
                },
                {
                    name: "ǤЖ",
                    level: 3,
                    kaid: "kaid_402317373472622403640722",
                    points: 0
                }
            ];
            
            function addMember(user) {
                var MEMBER = members[user],
                    KAID = members[user].kaid,
                    AVATAR;
                $.getJSON("https://www.khanacademy.org/api/internal/user/profile?kaid=" + KAID + "&callback=?", function(data) {
                    AVATAR = "https://cdn.kastatic.org/" + data.avatar.imagePath;
                    var NAME = data.nickname;
                    
                    if (NAME.length > 18) {
                        var str = data.nickname;
                        NAME = str.slice(0, 18) + "...";
                    } else {
                        NAME = data.nickname;
                    }
                
                    var $newMember = $("<div class='memberSlot'><a target='_blank' href='https://www.khanacademy.org/profile/" + members[user].kaid + "'><img class='member-img' width='95px' src='" + AVATAR +"'></a><h3 class='member-name'>" + NAME + "</h3><img class='userImgLvl' src='" + teamImgs[members[user].level] + "'><p class='member-points'> Points: " + members[user].points + "</p><p class='bio'>" + data.bio + "</p><p class='member-level'>Level: " + members[user].level + "</p></div>");
                    
                    $newMember.appendTo("#members");
                });
            }
            
            var index = 0;
            function loop() {
              setTimeout(function() {
                addMember(index);
                index++;
                if (index < members.length) {
                  loop();
                } else {
                    $("#loading").hide();
                }
              }, 10);
            };
        
            loop();
        </script>
        
        <!-- Adding teams to the table -->
        <script>
        var teams = [
                {
                    avatar: "https://www.khanacademy.org/cs/floran-ultimate/4864567244570624/latest.png",
                    name: "Floran",
                    points: 0,
                    members: null,
                    top3: "gold"
                },
                {
                    avatar: "https://www.khanacademy.org/cs/brisingr-ultimate/5093863603126272/latest.png",
                    name: "Brisingr",
                    points: 0,
                    members: null,
                    top3: "silver"
                },
                {
                    avatar: "https://www.khanacademy.org/cs/oceanus-ultimate/5427327279906816/latest.png",
                    name: "Oceanus",
                    points: 0,
                    members: null,
                    top3: "bronze"
                },
                {
                    avatar: "https://www.khanacademy.org/cs/spriker-ultimate/5485456306814976/latest.png",
                    name: "Spriker",
                    points: 0,
                    members: null
                },
                {
                    avatar: "https://www.khanacademy.org/cs/arbor-ultimate/5556175225044992/latest.png",
                    name: "Arbor",
                    points: 0,
                    members: null
                },
                {
                    avatar: "https://www.khanacademy.org/cs/cataegis-ultimate/4922998630465536/latest.png",
                    name: "Cataegis",
                    points: 0,
                    members: null
                },
                {
                    avatar: "https://www.khanacademy.org/cs/flame-ultimate/6512050831966208/latest.png",
                    name: "Flamy",
                    points: 0,
                    members: null
                },
            ];
        
        // trophies
        var gold = '<svg id="gold" class="trophy" height="50" width="50" transform="scale(0.5)"><ellipse cx="24" cy="27" rx="25" ry="25" style="fill:rgb(94, 94, 94);" /><ellipse cx="17" cy="20" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="13" cy="25" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="12" cy="30" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="15" cy="35" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="21" cy="39" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><text x="22.5" y="30" size="20px" fill="rgb(255, 208, 0)">1</text><ellipse cx="28" cy="39" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="33" cy="36" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="37" cy="31" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="38" cy="25" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="35" cy="20" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /></svg>';
          
        var silver = '<svg id="silver" class="trophy" height="50" width="50" transform="scale(0.5)"><ellipse cx="24" cy="27" rx="25" ry="25" style="fill:rgb(94, 94, 94);" /><ellipse cx="17" cy="20" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="13" cy="25" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="12" cy="30" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="15" cy="35" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="21" cy="39" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><text x="22.5" y="30" size="20px" fill="rgb(194, 192, 183)">2</text><ellipse cx="28" cy="39" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="33" cy="36" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="37" cy="31" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="38" cy="25" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="35" cy="20" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /></svg>';
        
        var bronze = '<svg id="bronze" class="trophy" height="50" width="50" transform="scale(0.5)"><ellipse cx="24" cy="27" rx="25" ry="25" style="fill:rgb(94, 94, 94);" /><ellipse cx="17" cy="20" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="13" cy="25" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="12" cy="30" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="15" cy="35" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="21" cy="39" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><text x="22.5" y="30" size="20px" fill="rgb(199, 134, 37)">3</text><ellipse cx="28" cy="39" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="33" cy="36" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="37" cy="31" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="38" cy="25" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /><ellipse cx="35" cy="20" rx="5" ry="5" style="fill:rgb(13, 171, 21);" /></svg>';
            
            for (var i in teams) {
                var TEAM = teams[i];
                $("#table-stats").append("<tr><td><img width='50px' src='" + TEAM.avatar + "'></td><td>" + TEAM.name + "</td><td>" + TEAM.members + "</td><td>" + TEAM.points + ((typeof TEAM.top3 === "undefined") ? ("") : ((TEAM.top3 === "gold") ? (gold) : ((TEAM.top3 === "silver") ? (silver) : (bronze)))) + "</td></tr>");
                if (typeof TEAM.top3 === "undefined") {
                    continue;
                }
                
                $(".trophy").css({
                    "position" : "absolute",
                    "left" : "480px",
                    "margin-top" : "-17px"
                });
            }
        </script>
        
        <!-- Scene Management -->
        <script>
            // just playing around
            var bottomPos = -30,
                leftPos = Math.random() * 1;
            var cloud = document.querySelector('#clouds');
            cloud.style.setProperty('bottom', bottomPos + 'px');
            cloud.style.setProperty('left', leftPos + 'px');
            
            // $(".page") selects all the elements with className "page". .hide() is a jQuery tool that hides the elements
            $(".page").hide();
            
            // $("#menu") selects the element with id "menu", .show() is a jQuery tool that shoes the element (since we just hid all of the pages, we need to start by showing the menu)
            $("#home").show();
            
            // defines a function to call upon when the mouse is clicked
            function clicked(scene) {
                // scene is the scene we want to go to
                
                $(".page").fadeOut(10); // hide all the scenes
                
                // show the right page
                $("#" + scene).fadeIn(1000);
                
                window.scroll(0,0);
            }
            
            // something to do later
            function hovered(text) {
              /*  var xPos = window.event.screenX,
                    yPos = window.event.screenY;
                    
                $("#popup").css({
                    "left" : xPos + "px",
                    "top" : yPos + "px"
                });*/
            }
            
        </script>
        
        <!--JavaScript below used to get a thumbnail for KA (made by Gray Wolf) -->
        <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.3/dist/html2canvas.min.js"></script>
        <script>
            var save = function(){
                html2canvas(document.body,{
                    allowTaint : false,
                    useCORS: true,
                    width:600,
                    height:600,
                })
                .then(function(canvas){
                    b64Img = canvas.toDataURL();
                    window.top.postMessage(b64Img, "https://www.khanacademy.org/");
                });
            };
            var handleSave = function(e) {
                if (JSON.parse(e.data).screenshot) {
                    setTimeout(function() {
                        console.log("Saving...");
                        save();
                    }, 1000)
                }
            };
            window.parent.savers = window.parent.savers || 0;
            window.parent.addEventListener('message', handleSave);
            window.parent.savers += 1;
            for (window.parent.savers; window.parent.savers > 1; window.parent.savers -= 1) {
                window.parent.removeEventListener('message', handleSave)
            }
        </script>
    </body>
</html>
